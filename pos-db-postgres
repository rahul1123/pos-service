--
-- PostgreSQL database dump
--

-- Dumped from database version 17.5
-- Dumped by pg_dump version 17.4

-- Started on 2025-10-15 11:43:25

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 219 (class 1259 OID 26245)
-- Name: accounts; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.accounts (
    id text NOT NULL,
    owner_id text NOT NULL,
    name text NOT NULL,
    industry text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.accounts OWNER TO postgres;

--
-- TOC entry 220 (class 1259 OID 26258)
-- Name: activities; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.activities (
    id text NOT NULL,
    account_id text NOT NULL,
    user_id text NOT NULL,
    type text,
    notes text,
    next_follow_up timestamp without time zone,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT activities_type_check CHECK ((type = ANY (ARRAY['call'::text, 'email'::text, 'demo'::text])))
);


ALTER TABLE public.activities OWNER TO postgres;

--
-- TOC entry 218 (class 1259 OID 26230)
-- Name: leads; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.leads (
    id text NOT NULL,
    owner_id text NOT NULL,
    name text NOT NULL,
    company text,
    status text DEFAULT 'new'::text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT leads_status_check CHECK ((status = ANY (ARRAY['new'::text, 'working'::text, 'qualified'::text, 'disqualified'::text])))
);


ALTER TABLE public.leads OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 26218)
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id text NOT NULL,
    email text NOT NULL,
    password_hash text NOT NULL,
    role text DEFAULT 'rep'::text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT users_role_check CHECK ((role = ANY (ARRAY['rep'::text, 'manager'::text])))
);


ALTER TABLE public.users OWNER TO postgres;

--
-- TOC entry 4878 (class 0 OID 26245)
-- Dependencies: 219
-- Data for Name: accounts; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.accounts (id, owner_id, name, industry, created_at, updated_at) FROM stdin;
a1	u2	Acme Inc	Manufacturing	2025-10-14 18:57:17.740369	2025-10-15 09:04:21.000169
\.


--
-- TOC entry 4879 (class 0 OID 26258)
-- Dependencies: 220
-- Data for Name: activities; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.activities (id, account_id, user_id, type, notes, next_follow_up, created_at) FROM stdin;
act1	a1	u2	call	Intro call--good fit!	\N	2025-10-14 18:57:17.740369
\.


--
-- TOC entry 4877 (class 0 OID 26230)
-- Dependencies: 218
-- Data for Name: leads; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.leads (id, owner_id, name, company, status, created_at, updated_at) FROM stdin;
l1	u2	Charlie	Acme Inc	working	2025-10-14 18:57:17.740369	2025-10-15 07:30:35.655603
\.


--
-- TOC entry 4876 (class 0 OID 26218)
-- Dependencies: 217
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (id, email, password_hash, role, created_at) FROM stdin;
u1	alice@corp.com	$2b$10$LRb6Sk4mJqqljoNV2KqB7el8R/Q9ZLf9rObmhZEC4sSLaS4L4JFfG	manager	2025-10-14 18:57:10.082278
u2	bob@corp.com	$2b$10$LRb6Sk4mJqqljoNV2KqB7el8R/Q9ZLf9rObmhZEC4sSLaS4L4JFfG	rep	2025-10-14 18:57:10.082278
\.


--
-- TOC entry 4724 (class 2606 OID 26252)
-- Name: accounts accounts_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.accounts
    ADD CONSTRAINT accounts_pkey PRIMARY KEY (id);


--
-- TOC entry 4726 (class 2606 OID 26266)
-- Name: activities activities_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.activities
    ADD CONSTRAINT activities_pkey PRIMARY KEY (id);


--
-- TOC entry 4722 (class 2606 OID 26239)
-- Name: leads leads_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.leads
    ADD CONSTRAINT leads_pkey PRIMARY KEY (id);


--
-- TOC entry 4718 (class 2606 OID 26229)
-- Name: users users_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_email_key UNIQUE (email);


--
-- TOC entry 4720 (class 2606 OID 26227)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 4728 (class 2606 OID 26253)
-- Name: accounts accounts_owner_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.accounts
    ADD CONSTRAINT accounts_owner_id_fkey FOREIGN KEY (owner_id) REFERENCES public.users(id) ON DELETE CASCADE;


--
-- TOC entry 4729 (class 2606 OID 26267)
-- Name: activities activities_account_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.activities
    ADD CONSTRAINT activities_account_id_fkey FOREIGN KEY (account_id) REFERENCES public.accounts(id) ON DELETE CASCADE;


--
-- TOC entry 4730 (class 2606 OID 26272)
-- Name: activities activities_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.activities
    ADD CONSTRAINT activities_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 4727 (class 2606 OID 26240)
-- Name: leads leads_owner_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.leads
    ADD CONSTRAINT leads_owner_id_fkey FOREIGN KEY (owner_id) REFERENCES public.users(id) ON DELETE CASCADE;


-- Completed on 2025-10-15 11:43:25

--
-- PostgreSQL database dump complete
--

